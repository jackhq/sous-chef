#
# Chef Server Config File
#
# Dynamically generated by Chef - local modifications will be replaced

log_level          :info
log_location       <%= @server_log %>
ssl_verify_mode    :verify_none
chef_server_url    "http://<%= node[:bootstrap][:chef][:server_fqdn] %>:<%= node[:bootstrap][:chef][:server_port] %>"

signing_ca_path    "<%= node[:bootstrap][:chef][:path] %>/ca"
couchdb_database   'chef'

cookbook_path      [ "<%= node[:bootstrap][:chef][:serve_path] %>/cookbooks", "<%= node[:bootstrap][:chef][:serve_path] %>/site-cookbooks" ]

file_cache_path    "<%= node[:bootstrap][:chef][:cache_path] %>"
node_path          "<%= node[:bootstrap][:chef][:serve_path] %>/nodes"
openid_store_path  "<%= node[:bootstrap][:chef][:path] %>/openid/store"
openid_cstore_path "<%= node[:bootstrap][:chef][:path] %>/openid/cstore"
search_index_path  "<%= node[:bootstrap][:chef][:path] %>/search_index"
role_path          "<%= node[:bootstrap][:chef][:serve_path] %>/roles"

validation_client_name "chef-validator"
validation_key         "/etc/chef/validation.pem"
client_key             "/etc/chef/client.pem"
web_ui_client_name     "chef-webui"
web_ui_key             "/etc/chef/webui.pem"

<% if node[:bootstrap][:chef][:webui_enabled] -%>
web_ui_admin_user_name "admin"
web_ui_admin_default_password "<%= node[:bootstrap][:chef][:webui_admin_password] %>"

<% end -%>
supportdir = "<%= node[:bootstrap][:chef][:path] %>/support"
solr_jetty_path File.join(supportdir, "solr", "jetty")
solr_data_path  File.join(supportdir, "solr", "data")
solr_home_path  File.join(supportdir, "solr", "home")
solr_heap_size  "256M"

umask <%= node[:bootstrap][:chef][:umask] %>

Mixlib::Log::Formatter.show_time = <%= @show_time %>
