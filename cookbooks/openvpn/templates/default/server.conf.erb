# OpenVPN server config file
#
# Generated by Chef - local changes will be overwritten

port 1194
proto <%= @openvpn[:proto] %>
<% if @openvpn[:type] == "server-bridge" -%>
dev tap
<% else -%>
dev tun
<% end -%>
keepalive 10 120
comp-lzo
local <%= @openvpn[:local] %>
up /etc/openvpn/server.up.sh

# Keys and certificates.
ca   /etc/openvpn/keys/ca.crt
key  /etc/openvpn/keys/server.key # This file should be kept secret. 
cert /etc/openvpn/keys/server.crt
dh   /etc/openvpn/keys/dh1024.pem

ifconfig-pool-persist /etc/openvpn/ipp.txt

<% if @openvpn[:type] == "server" -%>
<%= @openvpn[:type] %> <%= @openvpn[:subnet] %> <%= @openvpn[:netmask] %>
<% end -%>

user nobody
group nogroup

# avoid accessing certain resources on restart 
persist-key
persist-tun

# current client connections
status /etc/openvpn/openvpn-status.log

# logging settings.
log-append  /var/log/openvpn.log
verb 1  # don't spam the log with messages.
mute 10 # suppress identical messages > 10 occurances.
